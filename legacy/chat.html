<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARG2 - Chapter 2 Chat Restore</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,500;6..96,700&family=Shippori+Mincho:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body data-required-chapter="2">
  <div class="page">
    <header class="hero">
      <div>
        <nav class="top-nav">
          <a href="desktop.html">Desktop</a>
          <span class="nav-sep">/</span>
          <a href="index.html">Chapter 1</a>
          <span class="nav-sep">/</span>
          <a class="active" href="chat.html">Chapter 2</a>
          <span class="nav-sep">/</span>
          <a href="chapter3.html">Chapter 3</a>
        </nav>
        <p class="eyebrow">Chapter 2 / Chat Restoration</p>
        <h1>欠落DMの復元</h1>
        <p class="lead">
          チャットログの欠落を発見し、段階的に復元する。
          部分復元で違和感を生み、断片投入で完全復元へ進む。
        </p>
      </div>
      <div class="status-card" id="chatStatus">
        <p class="status-label">復元状況</p>
        <p class="status-value" id="chatStatusValue">欠落あり</p>
        <p class="status-hint" id="chatStatusHint">復元を試みてください。</p>
      </div>
    </header>

    <main class="chat-layout">
      <section class="panel">
        <div class="panel-header">
          <h2>チャットログ</h2>
          <p>欠落部分は [データ欠落] として表示されます。</p>
        </div>
        <div class="chat-window" id="chatWindow"></div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>復元操作</h2>
          <p>段階的に復元を進める。</p>
        </div>

        <div class="restore-card">
          <p class="restore-title">ステップ1: 部分復元</p>
          <p class="restore-desc">ログの欠落部分を可能な範囲で復元する。</p>
          <button class="primary" id="partialRestoreBtn" type="button">復元を試みる</button>
        </div>

        <div class="restore-card">
          <p class="restore-title">ステップ2: 断片を読み込む</p>
          <p class="restore-desc">バックアップ断片が必要です。</p>
          <button class="ghost" id="fragmentBtn" type="button" disabled>バックアップ断片を読み込む</button>
        </div>

        <div class="result" id="chatResult">
          <p class="result-title">完全復元成功</p>
          <p class="result-body">欠落していたメッセージがすべて復元されました。</p>
          <p class="result-hint">次の章で提出用の証拠として扱えます。</p>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>ARG2 Prototype — Chat Restoration (G2)</p>
    </footer>
  </div>

  <div class="locked-overlay">
    <div class="locked-card">
      <p class="locked-title">ロック中</p>
      <p class="locked-message">このページは Chapter 2 で解放されます。</p>
      <p class="locked-action">現在の章: Chapter 0</p>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script src="assets/js/chapter.js"></script>
  <script src="assets/js/chat.js"></script>
</body>
</html>
