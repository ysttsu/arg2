<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARG2 - Chapter 3 Version Restore</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,500;6..96,700&family=Shippori+Mincho:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <div class="page">
    <header class="hero">
      <div>
        <nav class="top-nav">
          <a href="index.html">Chapter 1</a>
          <span class="nav-sep">/</span>
          <a href="chat.html">Chapter 2</a>
          <span class="nav-sep">/</span>
          <a class="active" href="chapter3.html">Chapter 3</a>
        </nav>
        <p class="eyebrow">Chapter 3 / Version Restore</p>
        <h1>旧版復元と矛盾の確定</h1>
        <p class="lead">
          隠しフォルダを表示し、旧版メモを復元する。
          v1とv2の差分から事前知識の矛盾を確定する。
        </p>
      </div>
      <div class="status-card">
        <p class="status-label">隠しファイル</p>
        <p class="status-value" id="hiddenStatus">未表示</p>
        <p class="status-hint" id="hiddenHint">オプションを有効化してください。</p>
      </div>
    </header>

    <main class="version-layout">
      <section class="panel">
        <div class="panel-header">
          <h2>ファイル一覧</h2>
          <p>隠しファイルを表示すると `.version_history/` が見つかります。</p>
        </div>

        <div class="toggle-row">
          <button class="primary" id="toggleHiddenBtn" type="button">隠しファイルを表示</button>
        </div>

        <div class="file-list" id="fileList">
          <div class="file-item">Documents/Notes/investigation_notes_v2.txt</div>
          <div class="file-item">Documents/Notes/schedule_notes.txt</div>
          <div class="file-item">Documents/Browser/official_announcement.html</div>
        </div>

        <div class="file-list hidden" id="hiddenFiles">
          <div class="file-item highlight">Documents/.version_history/investigation_notes_v1.txt</div>
          <button class="ghost" id="compareBtn" type="button">v1とv2を比較する</button>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>差分比較</h2>
          <p>事前知識の矛盾箇所がハイライトされます。</p>
        </div>

        <div class="diff" id="diffPanel">
          <div class="diff-column">
            <div class="diff-title">v1（旧版）</div>
            <div class="diff-body" id="diffLeft"></div>
          </div>
          <div class="diff-column">
            <div class="diff-title">v2（現行）</div>
            <div class="diff-body" id="diffRight"></div>
          </div>
        </div>

        <div class="result" id="diffResult">
          <p class="result-title">矛盾を確定</p>
          <p class="result-body">事件当日にしか知り得ない情報が旧版に含まれていた。</p>
          <p class="result-hint">この証拠は裁定ボードで必須になります。</p>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>ARG2 Prototype — Version Restore (G3)</p>
    </footer>
  </div>

  <div class="toast" id="toast"></div>

  <script src="assets/js/version.js"></script>
</body>
</html>
