# GDD：コンパクト版 ブラウザ・デスクトップ探索ミステリー（短編・改訂版）

## 0. 概要

### コンセプト
ブラウザ上に再現された"PCデスクトップ"を操作し、故人のファイル／メール／チャット／メモから事件の真相に到達する短編ミステリー。
核は「見るゲーム」：覗き見るほど確信が固まり、終盤でどんでん返しが成立する。

### 想定プレイ時間・ボリューム
- **プレイ時間**：45〜75分
- **ファイル総数**：20〜30（意味があるのは11〜15）
- **アプリ数**：4つに固定（増やさない）
  - ファイル（Explorer）
  - ブラウザ（Browser）
  - メモ（Notes）
  - チャット（Chat）

### プレイヤーの立場（動機）
- 故人（オタク友人）のPC整理を遺族から依頼された第三者（友人）
- 依頼の目的は明確：
  1. 故人が残した「遺族宛メッセージ」を探す
  2. 故人が「警察/弁護士に渡すと言っていた資料」を回収する
→ 覗くことが必要悪として正当化され、進行を止めにくい。

### 物語の核
- 故人は亡くなった"推しアイドル（架空の人物）"の死因を調べていた
- しかし「死後も追っかけが続いている」痕跡があり、違和感が確定する
- 終盤、故人の調査が"真相究明"ではなく"偽装と正当化"だったと反転し、故人が犯人だと確定する

---

## 1. 体験設計

### コア体験ループ（短編用に簡略）
1. **探索**：ファイル／ブラウザ／メモ／チャットから断片を見つける
2. **提出**：スクラップボードに証拠を貼って"確定"する（進行の鍵）
3. **復元**：欠落DMと旧版メモを復元し、矛盾（改竄）を確定する
4. **裁定**：最後に採用証拠を提示して結論を確定する（2エンド分岐）

### 主要ギミック（3つだけ）
- **G1：3点一致（証拠提出）** …「死後も動いている」を確定
- **G2：欠落DM復元（段階的）** …章2で部分復元、章3で完全復元（決定打）
- **G3：旧版復元（1回）** …事前知識矛盾で改竄を確定

### フェアネス方針（後出し感を避ける）
- 決定打は「凶器」ではなく「改竄痕跡」「事前知識矛盾」「欠落DM復元」で成立させる
- 章1の違和感は必ず3点一致で客観的に確定させる
- 復元ギミックには必ず「なぜ今できるのか」の因果関係を示す

---

## 2. 章立て（4章で完走）

### 章0：依頼・ログイン（5分）

#### プレイヤーが分かること
- 遺族からPC整理を依頼される（遺族宛メッセージ探索＋資料回収）
- 故人は推しアイドル（架空の人物）の熱心なファンだった

#### 仕込む伏線（違和感の種）
- デスクトップに「CASE」系の雰囲気（整理されすぎたフォルダ名/付箋）
- **`CASE.zip`が最初から存在**（Documents/フォルダ内、開けない状態）
- 付箋に「復元すれば前の版が」「.version_historyに残ってるはず」などの単語（後で旧版復元へ繋がる）

#### 解くべきギミック
- ログイン：付箋＋壁紙/ファイル名からパス推測
- チュートリアル：検索、最近使った項目、ファイル詳細（更新日時）の見方

#### アンロック
- スクラップボード枠1（証拠提出の導入準備）
- 4アプリ（Explorer/Browser/Notes/Chat）の基本機能

---

### 章1：違和感確定（3点一致）（15分）

#### プレイヤーが分かること
- 推しアイドルは亡くなっているはずなのに、故人は死後も追跡を続けていた
- ただの未整理予定ではなく「実際に動いている」痕跡がある

#### 解くべきギミック（G1：3点一致）
以下を3つ集め、スクラップボードに提出すると"確定"し、次の鍵が出る。

**必要な証拠（3点）:**
- **A：死後の日付の交通/宿**
  - メール領収書（PDF）：ホテル予約確認
  - または新幹線eチケット（PDF）

- **B：死後の日付の受付/入場に相当する証拠**
  - 受付完了メール（EML）
  - または電子チケット（PDF）

- **C：死後の日付の現地証拠**
  - 写真1枚（JPG）：EXIFに日時/位置情報
  - またはレシート画像（現地店舗・日付明記）

#### 仕込む伏線
- 予定やメモに「下見」「導線」「警備配置」などの語彙（追っかけにしては不自然）
- "証拠を揃えれば何かが開く"という提示前提の気配
- フォルダ構造が整いすぎている（`CASE/EVIDENCE/`, `CASE/TIMELINE/`など）

#### アンロック
- スクラップボード枠が3に増加
- **`CASE.zip`のパスワードヒントが出現**
  - 提出完了後、新しい付箋がデスクトップに追加される
  - 内容：「パスは推しの誕生日（MMDD）」など

---

### 章2：調査の顔（ミスリード）（20分）

#### プレイヤーが分かること
- 故人は推しの死因に疑義を持ち、本格的に調査していた
- 公式発表と状況に矛盾があるように見える（ここで別犯人を疑わせる）
- しかし故人の調査メモには「整いすぎ」「読ませる文章」の違和感がある

#### 解くべきギミック
1. **`CASE.zip`を開く**
   - 章1で得たパスワードヒントを使って解凍
   - 中身：故人の調査資料（公式発表の魚拓、目撃証言まとめ、タイムライン）

2. **チャットログの欠落を発見**
   - `chat_log.txt`を開くと、特定の日時範囲（事件前後）のログが「[データ欠落]」表示
   - プレイヤーは「ここに何かあったはず」と気づく

3. **欠落DM復元ボタンが出現**
   - チャットアプリに「復元を試みる」ボタンが表示される

4. **部分復元（G2-前半）**
   - 復元ボタンを押すと「部分復元成功」のメッセージ
   - 復元された内容：
     ```
     [復元されたメッセージ - 一部破損]
     12/15 23:45 - 自分: 明日は大事な日
     12/16 07:30 - 自分: 準備はできた
     12/16 12:?? - [データ破損]
     12/16 15:20 - 自分: やっと終わった
     ```
   - プレイヤーは「何かあるな」と思うが、具体性がなく決定打にならない
   - メッセージ：「完全な復元には追加のバックアップデータが必要です」

#### 仕込む伏線（後で反転する素材）
- 故人の調査メモが"読ませる文章"っぽい（見出し、断定口調、結論誘導）
- 特定人物（関係者A）への追及が執拗で、「悪意」の描写が誇張されている
- アリバイ画像（故人が事件当日別の場所に居た証拠）が"都合良すぎる"違和感
  - 同じ場所・同じ構図の写真が複数枚ある（撮り直しの痕跡？）
  - EXIF情報が微妙に不自然（時刻の連続性など）

#### アンロック
- **旧版復元の準備**（まだ使えないが、手がかりが出る）
  - メモに「バージョン履歴は`.version_history/`に残ってる」という記述を発見
  - しかし`.version_history/`フォルダは最初は見つからない（隠しフォルダ）

---

### 章3：反転（決定打）（20〜25分）

#### プレイヤーが分かること
- 故人が犯人である決定打が揃う
- 故人の「死因調査」は真相究明ではなく"偽装と正当化"のためだった
- 全ての証拠は自分のアリバイを作り、別の人物に罪を着せるための工作だった

#### 解くべきギミック

**1. 隠しフォルダの発見**
- 検索機能で「.version」や「backup」などのキーワード検索
- または特定のフォルダオプション設定（「隠しファイルを表示」的なUI）を発見
- `Documents/.version_history/`フォルダが出現

**2. 旧版復元（G3）**
- `.version_history/`内に`investigation_notes_v1.txt`（旧版）を発見
- 現在の`investigation_notes_v2.txt`と比較できるツールが出現（差分表示）
- **事前知識の矛盾を発見**：
  ```
  v1（事件の1週間前に作成）:
  「12月16日12:34、北側階段で悲鳴が聞こえたはず」
  「血痕は階段の3段目あたりに残る可能性」

  ※これらは事件当日にしか知り得ない情報
  ※後日の報道でも出てこなかった詳細
  ```
- v2では矛盾箇所が修正・削除されているが、v1に残っている

**3. バックアップ断片の発見**
- `.sync_cache/`フォルダに`backup_fragments.dat`を発見
- または「クラウド同期の断片ファイルがあります」というヒントメモ

**4. 欠落DM完全復元（G2-後半）**
- バックアップ断片を復元ツールに「読み込む」操作
- 完全復元成功のメッセージ
- 復元された内容（決定打）：
  ```
  [完全復元されたメッセージ]
  12/15 23:45 - 自分: 明日決行する
  12/16 07:30 - 自分: 準備は完璧。例のものは収納ケースに入れた
  12/16 12:15 - 自分: 会場に着いた。警備は予想通り
  12/16 12:34 - 自分: 完了。北側階段、誰も見ていない
  12/16 15:20 - 自分: やっと終わった。これで全部終わる
  12/16 23:00 - [このログを削除し、差し替え版を作成]
  ```

**5. 最終提出（裁定ボード）**
- スクラップボードが「裁定モード」に切り替わる
- 以下の証拠を提出して「故人＝犯人」の結論を確定：
  - 旧版の事前知識矛盾（必須）
  - 完全復元されたDM（必須）
  - アリバイ画像の不自然さ（任意）
- 提出すると最終確認メッセージ：「これらの証拠を遺族に報告しますか？」

#### エンディング（2つ）
**End A：真相を伝える**
- 証拠を遺族に渡す
- 遺族の悲しみと衝撃
- 故人の名誉は失われるが、被害者の無念は晴れる
- プレイヤーは「正しいことをした」と思うが、重い余韻

**End B：封印する**
- 証拠を破棄する
- 遺族は「メッセージも資料も見つかりませんでした」と報告される
- 遺族は故人を良い思い出として記憶し続ける
- プレイヤーは真相を抱えたまま、共犯者のような罪悪感

---

## 3. 伏線・情報設計（最小セット）

### 序盤から置く"犯人サイン"（気づきにくい）
| 伏線                       | 出現章 | 回収章 | 強度                 |
| -------------------------- | ------ | ------ | -------------------- |
| `CASE.zip`の存在           | 0      | 2      | 弱（調査してる証拠） |
| 付箋の「復元」「前の版」   | 0      | 3      | 中（後で機能する）   |
| フォルダ構造が整いすぎ     | 1      | 3      | 中（提示前提）       |
| 「下見」「導線」などの語彙 | 1      | 3      | 中（計画性）         |
| 読ませる文章の調査メモ     | 2      | 3      | 強（自己正当化）     |
| アリバイ画像の不自然さ     | 2      | 3      | 強（生成/改竄）      |

### 中盤の"反転素材"
| 伏線                 | 出現章 | 回収章 | 強度               |
| -------------------- | ------ | ------ | ------------------ |
| チャットログ欠落     | 2      | 3      | 最強（決定打）     |
| 部分復元の曖昧な内容 | 2      | 3      | 強（布石）         |
| 旧版の存在示唆       | 2      | 3      | 強（事前知識矛盾） |

---

## 4. アンロック設計（機能解放）

| 章  | 解放される機能                                     | 解放される領域/アイテム                       |
| --- | -------------------------------------------------- | --------------------------------------------- |
| 0   | 4アプリ基本機能＋スクラップ枠1                     | デスクトップ表層、`CASE.zip`（開けない）      |
| 1   | スクラップ枠3＋パスワードヒント                    | `CASE.zip`のパスワードが判明                  |
| 2   | 欠落DM復元ボタン（部分復元のみ）                   | `CASE.zip`の中身、チャットログ欠落発見        |
| 3   | 隠しフォルダ表示＋旧版復元＋完全DM復元＋裁定ボード | `.version_history/`, `.sync_cache/`, 全決定打 |

---

## 5. コンテンツ最小構成（必須11アイテム）

### 必須（意味があるもの）
1. **依頼文**（TXT）：遺族からの依頼内容
2. **付箋**（UI要素）：ログインヒント、復元ヒント
3. **交通/宿領収書**（PDF）：死後の日付の予約証明
4. **受付/チケットメール**（EML）：死後の日付の入場証明
5. **現地写真**（JPG）：EXIF付き、死後の日付の現地証拠
6. **`CASE.zip`**（ZIP→展開）：故人の調査資料一式
7. **公式発表魚拓**（HTML）：事故の公式発表
8. **故人の調査メモ v2**（TXT）：現在の版（矛盾が修正済み）
9. **故人の調査メモ v1**（TXT）：旧版（事前知識矛盾あり）
10. **チャットログ**（TXT）：最初は欠落版、復元後は完全版に変化（**同一ファイルの状態変化**）
11. **アリバイ画像**（PNG）：都合が良すぎる故人のアリバイ証拠

### 任意（雰囲気・感情曲線用：+6〜10）
- 壁紙（推しの画像）
- プレイリスト（音楽ファイル一覧）
- サークル会計表（オタクPCらしさ）
- 予定表（下見語彙を混ぜる）
- ブラウザ履歴の一部（調査ツール、会場情報など）
- ゴミ箱の削除ログ（証拠隠滅の痕跡）
- バックアップ断片ファイル（`.sync_cache/backup_fragments.dat`）
- クラウド同期設定ファイル（同期の証拠）
- 関係者へのDM（別人を疑わせるミスリード用）
- 購入履歴（危険な準備の痕跡、章2で軽く触れる程度）

---

## 6. ギミック詳細設計

### G1：3点一致（証拠提出）
**導入章**: 章1
**目的**: 「死後も動いている」を客観的に確定
**実装**:
- スクラップボードにドラッグ&ドロップで証拠を配置
- A/B/Cの3カテゴリに1つずつ証拠が揃うと「提出」ボタンが有効化
- 提出すると「確定しました」メッセージ＋次の鍵（パスワードヒント）

### G2：欠落DM復元（段階的）
**導入章**: 章2（部分復元）、章3（完全復元）
**目的**: 布石→決定打の快感を作る
**実装**:
- **章2**:
  - チャットログに「[データ欠落]」表示
  - 「復元を試みる」ボタンクリック
  - 部分復元成功：曖昧な内容（「明日は大事な日」レベル）
  - メッセージ：「完全復元には追加データが必要」
- **章3**:
  - バックアップ断片ファイル（`.sync_cache/backup_fragments.dat`）を発見
  - 復元ツールに「読み込む」ボタンで断片を投入
  - 完全復元成功：具体的な実行計画が露見

### G3：旧版復元（1回）
**導入章**: 章3
**目的**: 事前知識矛盾で改竄を確定
**実装**:
- **章2**で「`.version_history/`に残ってる」ヒントを発見
- **章3**で隠しフォルダ表示機能を解放
- `.version_history/investigation_notes_v1.txt`を発見
- 差分比較ツールでv1とv2を並べて表示
- 矛盾箇所をハイライト（事前知識の証拠）

---

## 7. UI/実装ガイド（短編向け制約）

### UI制約（コスト削減）
- **アプリは4つのみ**（追加しない）
  - Explorer（ファイル管理）
  - Browser（ウェブ閲覧・履歴）
  - Notes（テキストメモ閲覧・編集）
  - Chat（チャットログ閲覧・復元）
- **複雑UIは作らない**
  - タイムラインUI → 不要（メモで代替）
  - 人物相関UI → 不要（テキストで説明）
  - 会場マップUI → 不要（画像で代替）
- **復元は専用ツールではなく、アプリ内ボタン**
  - Chat内に「復元」ボタン
  - Explorer内に「隠しファイル表示」オプション
  - Notes内に「差分比較」ボタン

### ProzillaOS統合方針（体験ブラッシュアップ）
- **ProzillaOSをデスクトップ基盤として採用**し、OS上で一連の探索体験を完結させる
- **4アプリのみをタスクバー/デスクトップに固定**（追加アプリは出さない）
- **G1/G2/G3は既存アプリ内の画面**として配置する
  - G1：Notesまたは専用ボードをNotes内に組み込み
  - G2：Chat内の復元操作として完結
  - G3：Notes内の差分比較として完結
- **章解放はアプリ内の表示切替で表現**（ロック表示／操作非活性）
- **開発用の章切替は別UI**として持たせるが、公開版では非表示にする

### 演出の方針
- **章1は客観的証拠のみ**で確信を作る（主観メモで確定させない）
- **章2で疑念を植え付ける**が、決定打は出さない
- **章3で一気に決定打**を並べる（快感の集中）
- **エンディングは短く余韻重視**（長い説明は不要）

---

## 8. プレイ時間配分（修正版）

| 章       | 想定時間     | 主な内容                                                 |
| -------- | ------------ | -------------------------------------------------------- |
| 0        | 5分          | ログインパズル、チュートリアル                           |
| 1        | 15分         | 3点一致の証拠集め、提出                                  |
| 2        | 20分         | `CASE.zip`開封、調査内容確認、欠落発見、部分復元         |
| 3        | 20〜25分     | 隠しフォルダ発見、旧版復元、完全DM復元、裁定、エンド選択 |
| **合計** | **60〜65分** | 想定範囲（45〜75分）内                                   |

---

## 9. 実装の因果関係（フェアネス担保）

### なぜ章1で`CASE.zip`が開けないのか？
→ **パスワードが分からない**（章1の3点一致提出後、ヒントが出る）

### なぜ章2では欠落DMが完全復元できないのか？
→ **バックアップ断片ファイルがまだ見つかっていない**（章3で発見）

### なぜ章2では旧版が見られないのか？
→ **`.version_history/`フォルダが隠しフォルダで見つかっていない**（章3で表示機能解放）

### なぜ章3で急に全て見つかるのか？
→ **プレイヤーが章2で「隠された情報がある」ことを学習**し、章3で能動的に探す
→ **ヒント（メモの記述）が章2で提示済み**で、章3は実行フェーズ

---

## 10. 次の作業（実装用ToDo）

### 優先度：最高
1. **ファイルツリーの確定**
   - 20〜30ファイルの配置場所とファイル名
   - 各ファイルの内容（3〜5行の要約）

2. **証拠アイテムの詳細化**
   - 必須11アイテムの具体的な内容（本文）
   - EXIFデータの具体的な値
   - 旧版v1とv2の差分箇所

3. **`CASE.zip`のパスワード導線**
   - 章1提出後のヒントメッセージ
   - パスワードの答え（例：推しの誕生日「0315」）

### 優先度：高
4. **欠落DMの復元前/後テキスト**
   - 部分復元版（章2）：5〜6行の曖昧な内容
   - 完全復元版（章3）：10〜15行の具体的な実行計画

5. **調査メモ v1/v2 の差分**
   - v1（旧版）：事前知識矛盾を含む版（8〜10行）
   - v2（現行）：矛盾が修正された版（8〜10行）
   - 差分ハイライト箇所の特定

6. **2エンドの最終メッセージ**
   - End A（真相を伝える）：3〜5行
   - End B（封印する）：3〜5行

### 優先度：中
7. **UI要素の具体的なデザイン**
   - スクラップボードのレイアウト
   - 復元ボタンの配置
   - 差分比較ツールの表示

8. **任意ファイルの内容**
   - 雰囲気作りのための6〜10個の追加ファイル
